"use strict";(self.webpackChunkmediadashboard=self.webpackChunkmediadashboard||[]).push([[70],{8891:function(ee,I,n){var E=n(56453),c=n(59496),D=n(22800),A=n(7846),L=function(W,O){return c.createElement(A.Z,(0,E.Z)((0,E.Z)({},W),{},{ref:O,icon:D.Z}))},R=c.forwardRef(L);I.Z=R},24315:function(ee,I,n){var E=n(6614),c=n(56453),D=n(87906),A=n(47746),L=n(92094),R=n(25030),V=n(16760),W=n(59496),O=n(90750),v=n(4637),k=["fieldProps","proFieldProps"],N=["fieldProps","proFieldProps"],F="text",J=function(l){var o=l.fieldProps,C=l.proFieldProps,h=(0,D.Z)(l,k);return(0,v.jsx)(O.Z,(0,c.Z)({valueType:F,fieldProps:o,filedConfig:{valueType:F},proFieldProps:C},h))},y=function(l){var o=(0,A.Z)(l.open||!1,{value:l.open,onChange:l.onOpenChange}),C=(0,E.Z)(o,2),h=C[0],$=C[1];return(0,v.jsx)(L.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(U){var P,z=U.getFieldValue(l.name||[]);return(0,v.jsx)(R.Z,(0,c.Z)((0,c.Z)({getPopupContainer:function(u){return u&&u.parentNode?u.parentNode:u},onOpenChange:function(u){return $(u)},content:(0,v.jsxs)("div",{style:{padding:"4px 0"},children:[(P=l.statusRender)===null||P===void 0?void 0:P.call(l,z),l.strengthText?(0,v.jsx)("div",{style:{marginTop:10},children:(0,v.jsx)("span",{children:l.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},l.popoverProps),{},{open:h,children:l.children}))}})},B=function(l){var o=l.fieldProps,C=l.proFieldProps,h=(0,D.Z)(l,N),$=(0,W.useState)(!1),x=(0,E.Z)($,2),U=x[0],P=x[1];return o!=null&&o.statusRender&&h.name?(0,v.jsx)(y,{name:h.name,statusRender:o==null?void 0:o.statusRender,popoverProps:o==null?void 0:o.popoverProps,strengthText:o==null?void 0:o.strengthText,open:U,onOpenChange:P,children:(0,v.jsx)("div",{children:(0,v.jsx)(O.Z,(0,c.Z)({valueType:"password",fieldProps:(0,c.Z)((0,c.Z)({},(0,V.Z)(o,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(S){var u;o==null||(u=o.onBlur)===null||u===void 0||u.call(o,S),P(!1)},onClick:function(S){var u;o==null||(u=o.onClick)===null||u===void 0||u.call(o,S),P(!0)}}),proFieldProps:C,filedConfig:{valueType:F}},h))})}):(0,v.jsx)(O.Z,(0,c.Z)({valueType:"password",fieldProps:o,proFieldProps:C,filedConfig:{valueType:F}},h))},T=J;T.Password=B,T.displayName="ProFormComponent",I.Z=T},52155:function(ee,I,n){n.r(I),n.d(I,{default:function(){return se}});var E=n(26068),c=n.n(E),D=n(67825),A=n.n(D),L=n(48305),R=n.n(L),V=n(87218),W=n(436),O=n(83280),v=n(56885),k=n(24757),N=n(59496),F={cover:"cover___Z7cyz"},J=n(35066),y=n(18603),B=n(78501),T=n(23153),K=n(4855),l=n(34298),o=n(31220),C=n(43591),h=n(72741),$=n(50468),x=n(85408),U=n(90228),P=n.n(U),z=n(87999),S=n.n(z),u=n(92705),te=n(24315),re=n(92094),e=n(4637),oe=function(r){var X=r.trigger,Y=r.onOk,b=re.Z.useForm(),w=R()(b,1),_=w[0];return(0,e.jsx)(u.Y,{title:"Scan option",trigger:X,form:_,autoFocusFirstInput:!0,onFinish:function(){var G=S()(P()().mark(function H(q){return P()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Y(q),Z.abrupt("return",!0);case 2:case"end":return Z.stop()}},H)}));return function(H){return G.apply(this,arguments)}}(),children:(0,e.jsx)(te.Z,{name:"name",label:"Name"})})},ae=oe,Q=n(90810),ie=n(8891),le=["type","defaultRender","formItemProps","fieldProps"],de=function(){var r=(0,k.useModel)("YouVideo.videoList"),X=(0,N.useState)(""),Y=R()(X,2),b=Y[0],w=Y[1],_=(0,N.useState)(""),G=R()(_,2),H=G[0],q=G[1],ne=J.Z.useToken(),Z=ne.token.colorPrimary;(0,N.useEffect)(function(){r.loadData({}),r.loadLibrary()},[]);var ce=[{title:"id",dataIndex:"id",key:"id",hideInSearch:!0},{title:"cover",dataIndex:"cover",key:"cover",hideInSearch:!0,render:function(d,t){var a;if(((a=t.files)===null||a===void 0?void 0:a.length)===0)return(0,e.jsx)(e.Fragment,{});var s=t.files[0];return(0,e.jsx)("img",{src:s.cover,className:F.cover})},width:64},{title:"name",dataIndex:"name",key:"name",render:function(d,t){var a,s,p,m=(a=t.regexResult)===null||a===void 0?void 0:a.name,M=((s=t.edit)===null||s===void 0?void 0:s.name)||t.name,j=((p=t.edit)===null||p===void 0?void 0:p.name)!==void 0;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(y.Z,{children:[(0,e.jsx)(B.Z.Text,{editable:{onChange:function(f){return r.applyEditItem(t.id,"name",f)}},style:{color:j?Z:void 0},children:M}),j&&(0,e.jsx)(Q.Z,{size:12,onClick:function(){return r.resetEditItem(t.id,"name")}}),(0,e.jsx)("a",{onClick:function(){return k.history.push("/youvideo/video/detail?id=".concat(t.id))},children:"Detail"})]}),m&&(0,e.jsx)("div",{children:(0,e.jsxs)(T.Z.CheckableTag,{checked:m.apply,onChange:function(f){return r.onSelectRegexResult(t.id,"name",f)},children:[m.value," "]})})]})}},{title:"ep",dataIndex:"ep",key:"ep",render:function(d,t){var a,s,p,m=(a=t.regexResult)===null||a===void 0?void 0:a.ep,M=((s=t.edit)===null||s===void 0?void 0:s.ep)||t.ep,j=((p=t.edit)===null||p===void 0?void 0:p.ep)!==void 0;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(y.Z,{children:[(0,e.jsx)(B.Z.Text,{style:{color:j?Z:void 0},editable:{onChange:function(f){return r.applyEditItem(t.id,"ep",f)}},children:M}),j&&(0,e.jsx)(Q.Z,{size:12,onClick:function(){return r.resetEditItem(t.id,"ep")}})]}),m&&(0,e.jsx)("div",{children:(0,e.jsxs)(T.Z.CheckableTag,{checked:m.apply,onChange:function(f){return r.onSelectRegexResult(t.id,"ep",f)},children:[m.value," "]})})]})}},{title:"order",dataIndex:"order",key:"order",render:function(d,t){var a,s,p,m=(a=t.regexResult)===null||a===void 0?void 0:a.order,M=((s=t.edit)===null||s===void 0?void 0:s.order)||t.order,j=((p=t.edit)===null||p===void 0?void 0:p.order)!==void 0;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(y.Z,{children:(0,e.jsxs)(B.Z.Text,{style:{color:j?Z:void 0},editable:{onChange:function(f){return r.applyEditItem(t.id,"order",Number(f))}},children:[M,j&&(0,e.jsx)(Q.Z,{size:12,onClick:function(){return r.resetEditItem(t.id,"order")}})]})}),m&&(0,e.jsx)("div",{children:(0,e.jsxs)(T.Z.CheckableTag,{checked:m.apply,onChange:function(f){return r.onSelectRegexResult(t.id,"order",f)},children:[m.value," "]})})]})}},{title:"Library",dataIndex:"library_id",key:"library",render:function(d,t){var a=r.libraryList.find(function(s){return s.id===t.library_id});return a?"".concat(a.name,"(").concat(a.id,")"):"unknown"},proFieldProps:{renderFormItem:function(d,t,a){var s=t.type,p=t.defaultRender,m=t.formItemProps,M=t.fieldProps,j=A()(t,le);return s==="form"?null:(0,e.jsx)(K.Z,c()(c()({},M),{},{options:r.libraryList.map(function(g){return{label:g.name,value:g.id}})}))}}}];return(0,e.jsx)(V._z,{children:(0,e.jsxs)(l.Z,{gutter:[16,16],children:[(0,e.jsx)(o.Z,{span:24,children:(0,e.jsx)(C.Z,{children:(0,e.jsx)(l.Z,{children:(0,e.jsx)(o.Z,{span:12,children:(0,e.jsxs)(y.Z,{children:[(0,e.jsx)(K.Z,{style:{width:720},options:r.nameMatchRegex.map(function(i){return{label:i,value:i}}),onSelect:function(d){q(d)},dropdownRender:function(d){return(0,e.jsxs)(e.Fragment,{children:[d,(0,e.jsx)(h.Z,{style:{margin:"8px 0"}}),(0,e.jsxs)(y.Z,{style:{padding:"0 8px 4px"},children:[(0,e.jsx)($.Z,{placeholder:"New regex",onChange:function(a){return w(a.target.value)}}),(0,e.jsx)(x.ZP,{type:"text",icon:(0,e.jsx)(ie.Z,{}),onClick:function(){b.length>0&&r.addNameMatchRegex(b)},children:"Add item"})]})]})}}),(0,e.jsx)(x.ZP,{onClick:function(){r.applyNameRegexMatch(H)},type:"primary",children:"Apply Regex"}),r.inNameMatchMode&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(h.Z,{}),(0,e.jsx)(x.ZP,{onClick:function(){r.saveMatchResult()},children:"Save"}),(0,e.jsx)(x.ZP,{onClick:function(){r.resetMatchResult()},children:"Clear"})]})]})})})})}),(0,e.jsx)(o.Z,{span:24,children:(0,e.jsx)(W.Z,{dataSource:r.videoList,columns:ce,loading:r.loading,rowSelection:{onChange:function(d,t){r.setSelectedVideo(t)},selectedRowKeys:r.selectedVideo.map(function(i){return i.id})},tableAlertOptionRender:function(d){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ae,{trigger:(0,e.jsx)("a",{children:"Create new entity"}),onOk:function(a){return r.createNewEntity(a.name)}}),(0,e.jsx)(h.Z,{type:"vertical"}),(0,e.jsx)("a",{onClick:function(){return r.setSelectedVideo([])},children:"Clear all"})]})},toolbar:{filter:(0,e.jsxs)(y.Z,{children:[(0,e.jsx)(O.M,{children:(0,e.jsx)(v.Z,{name:"order",label:"Order",fieldProps:{dropdownMatchSelectWidth:!1,onChange:function(d){r.loadData({queryOrder:d})}},initialValue:r.order,allowClear:!1,valueEnum:{idasc:"ID Asc",iddesc:"ID Desc",nameasc:"Name Asc",namedesc:"Name Desc",createdasc:"Created Asc",createddesc:"Created Desc"}})}),r.videoHasEdited&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(x.ZP,{type:"primary",onClick:function(){return r.applyChange()},children:"Save changes"}),(0,e.jsx)(x.ZP,{onClick:function(){return r.resetChange()},children:"Reset changes"})]})]})},pagination:{showQuickJumper:!0,total:r.pagination.total,current:r.pagination.page,pageSize:r.pagination.pageSize,pageSizeOptions:["10","20","50","100"],showSizeChanger:!0,defaultPageSize:50,onChange:function(d,t){r.loadData({page:c()(c()({},r.pagination),{},{page:d,pageSize:t})})}},rowKey:function(d){return d.id},onSubmit:function(d){return r.updateFilter(d)}})})]})})},se=de}}]);
