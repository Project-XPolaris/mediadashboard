"use strict";(self.webpackChunkmediadashboard=self.webpackChunkmediadashboard||[]).push([[366],{24315:function(ce,z,e){var K=e(6614),c=e(56453),V=e(87906),B=e(47746),k=e(92094),O=e(25030),Y=e(16760),Q=e(59496),I=e(90750),v=e(4637),X=["fieldProps","proFieldProps"],l=["fieldProps","proFieldProps"],g="text",J=function(s){var t=s.fieldProps,j=s.proFieldProps,P=(0,V.Z)(s,X);return(0,v.jsx)(I.Z,(0,c.Z)({valueType:g,fieldProps:t,filedConfig:{valueType:g},proFieldProps:j},P))},w=function(s){var t=(0,B.Z)(s.open||!1,{value:s.open,onChange:s.onOpenChange}),j=(0,K.Z)(t,2),P=j[0],R=j[1];return(0,v.jsx)(k.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(U){var m,W=U.getFieldValue(s.name||[]);return(0,v.jsx)(O.Z,(0,c.Z)((0,c.Z)({getPopupContainer:function(d){return d&&d.parentNode?d.parentNode:d},onOpenChange:function(d){return R(d)},content:(0,v.jsxs)("div",{style:{padding:"4px 0"},children:[(m=s.statusRender)===null||m===void 0?void 0:m.call(s,W),s.strengthText?(0,v.jsx)("div",{style:{marginTop:10},children:(0,v.jsx)("span",{children:s.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},s.popoverProps),{},{open:P,children:s.children}))}})},q=function(s){var t=s.fieldProps,j=s.proFieldProps,P=(0,V.Z)(s,l),R=(0,Q.useState)(!1),A=(0,K.Z)(R,2),U=A[0],m=A[1];return t!=null&&t.statusRender&&P.name?(0,v.jsx)(w,{name:P.name,statusRender:t==null?void 0:t.statusRender,popoverProps:t==null?void 0:t.popoverProps,strengthText:t==null?void 0:t.strengthText,open:U,onOpenChange:m,children:(0,v.jsx)("div",{children:(0,v.jsx)(I.Z,(0,c.Z)({valueType:"password",fieldProps:(0,c.Z)((0,c.Z)({},(0,Y.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(F){var d;t==null||(d=t.onBlur)===null||d===void 0||d.call(t,F),m(!1)},onClick:function(F){var d;t==null||(d=t.onClick)===null||d===void 0||d.call(t,F),m(!0)}}),proFieldProps:j,filedConfig:{valueType:g}},P))})}):(0,v.jsx)(I.Z,(0,c.Z)({valueType:"password",fieldProps:t,proFieldProps:j,filedConfig:{valueType:g}},P))},D=J;D.Password=q,D.displayName="ProFormComponent",z.Z=D},67476:function(ce,z,e){e.r(z),e.d(z,{default:function(){return Ce}});var K=e(90228),c=e.n(K),V=e(26068),B=e.n(V),k=e(87999),O=e.n(k),Y=e(48305),Q=e.n(Y),I=e(30963),v=e(97318),X=e(53556),l=e(56453),g=e(59496),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},w=J,q=e(7846),D=function(o,i){return g.createElement(q.Z,(0,l.Z)((0,l.Z)({},o),{},{ref:i,icon:w}))},G=g.forwardRef(D),s=G,t=e(87906),j=e(61809),P=e(93982),R=e(82187),A=e.n(R),U=e(6843),m=e(24255),W=e(31819),F=function(o){return(0,m.Z)((0,m.Z)({},o.componentCls,{"&-container":{display:"flex",flex:"1",flexDirection:"column",height:"100%",paddingInline:32,paddingBlock:24,overflow:"auto",background:"inherit"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",height:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",insetBlockStart:"2px",color:"@heading-color",fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:o.colorTextSecondary,fontSize:o.fontSize},"&-main":{minWidth:"328px",maxWidth:"580px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),"@media (min-width: @screen-md-min)",(0,m.Z)({},"".concat(o.componentCls,"-container"),{paddingInline:0,paddingBlockStart:32,paddingBlockEnd:24,backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"}))};function d(r){return(0,W.Xj)("LoginForm",function(o){var i=(0,l.Z)((0,l.Z)({},o),{},{componentCls:".".concat(r)});return[F(i)]})}var n=e(4637),ve=["logo","message","contentStyle","title","subTitle","actions","children","containerStyle","otherStyle"];function ge(r){var o,i=r.logo,S=r.message,E=r.contentStyle,C=r.title,h=r.subTitle,b=r.actions,T=r.children,_=r.containerStyle,ee=r.otherStyle,u=(0,t.Z)(r,ve),y=(0,j.YB)(),M=u.submitter===!1?!1:(0,l.Z)((0,l.Z)({searchConfig:{submitText:y.getMessage("loginForm.submitText","\u767B\u5F55")}},u.submitter),{},{submitButtonProps:(0,l.Z)({size:"large",style:{width:"100%"}},(o=u.submitter)===null||o===void 0?void 0:o.submitButtonProps),render:function(te,ue){var re,Te=ue.pop();if(typeof(u==null||(re=u.submitter)===null||re===void 0?void 0:re.render)=="function"){var $,ae;return u==null||($=u.submitter)===null||$===void 0||(ae=$.render)===null||ae===void 0?void 0:ae.call($,te,ue)}return Te}}),f=(0,g.useContext)(P.ZP.ConfigContext),p=f.getPrefixCls("pro-form-login"),x=d(p),L=x.wrapSSR,H=x.hashId,a=function(te){return"".concat(p,"-").concat(te," ").concat(H)},ne=(0,g.useMemo)(function(){return i?typeof i=="string"?(0,n.jsx)("img",{src:i}):i:null},[i]);return L((0,n.jsxs)("div",{className:A()(a("container"),H),style:_,children:[(0,n.jsxs)("div",{className:"".concat(a("top")," ").concat(H).trim(),children:[C||ne?(0,n.jsxs)("div",{className:"".concat(a("header")),children:[ne?(0,n.jsx)("span",{className:a("logo"),children:ne}):null,C?(0,n.jsx)("span",{className:a("title"),children:C}):null]}):null,h?(0,n.jsx)("div",{className:a("desc"),children:h}):null]}),(0,n.jsxs)("div",{className:a("main"),style:(0,l.Z)({width:328},E),children:[(0,n.jsxs)(U.A,(0,l.Z)((0,l.Z)({isKeyPressSubmit:!0},u),{},{submitter:M,children:[S,T]})),b?(0,n.jsx)("div",{className:a("main-other"),style:ee,children:b}):null]})]}))}var oe=e(24315),se=e(78380),fe=e(95157),me=e(54473),le=e(90750),he=["options","fieldProps","proFieldProps","valueEnum"],pe=g.forwardRef(function(r,o){var i=r.options,S=r.fieldProps,E=r.proFieldProps,C=r.valueEnum,h=(0,t.Z)(r,he);return(0,n.jsx)(le.Z,(0,l.Z)({ref:o,valueType:"checkbox",valueEnum:(0,se.h)(C,void 0),fieldProps:(0,l.Z)({options:i},S),lightProps:(0,l.Z)({labelFormatter:function(){return(0,n.jsx)(le.Z,(0,l.Z)({ref:o,valueType:"checkbox",mode:"read",valueEnum:(0,se.h)(C,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,l.Z)({options:i},S),proFieldProps:E},h))}},h.lightProps),proFieldProps:E},h))}),xe=g.forwardRef(function(r,o){var i=r.fieldProps,S=r.children;return(0,n.jsx)(fe.Z,(0,l.Z)((0,l.Z)({ref:o},i),{},{children:S}))}),Pe=(0,me.G)(xe,{valuePropName:"checked"}),ie=Pe;ie.Group=pe;var Se=ie,Z=e(24757),ye=e(94203),de=e(15238),Me=e(87995),N={root:"root___kWZwI",container:"container___REQAy",lang:"lang___DAjLY",content:"content___IkUx1",icon:"icon___fqAhh"},je=function(o){var i=o.content;return(0,n.jsx)(ye.Z,{style:{marginBottom:24},message:i,type:"error",showIcon:!0})},Ze=function(){var o=(0,g.useState)(void 0),i=Q()(o,2),S=i[0],E=i[1],C=(0,Z.useModel)("@@initialState"),h=C.initialState,b=C.setInitialState,T=(0,Z.useIntl)(),_=function(){var u=O()(c()().mark(function y(){var M,f;return c()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,h==null||(M=h.fetchUserInfo)===null||M===void 0?void 0:M.call(h);case 2:f=x.sent,f&&(0,Me.flushSync)(function(){b(function(L){return B()(B()({},L),{},{currentUser:f})})});case 4:case"end":return x.stop()}},y)}));return function(){return u.apply(this,arguments)}}(),ee=function(){var u=O()(c()().mark(function y(M){var f,p,x,L;return c()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,v.x4)(B()({},M));case 3:if(f=a.sent,!f.success){a.next=13;break}return p=T.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),de.ZP.success(p),localStorage.setItem("token",f.data.accessToken),a.next=10,_();case 10:return x=new URL(window.location.href).searchParams,Z.history.push(x.get("redirect")||"/"),a.abrupt("return");case 13:console.log(f),E(f),a.next=22;break;case 17:a.prev=17,a.t0=a.catch(0),L=T.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),console.log(a.t0),de.ZP.error(L);case 22:case"end":return a.stop()}},y,null,[[0,17]])}));return function(M){return u.apply(this,arguments)}}();return(0,n.jsxs)("div",{className:N.container,children:[(0,n.jsx)("div",{className:N.lang,"data-lang":!0,children:Z.SelectLang&&(0,n.jsx)(Z.SelectLang,{})}),(0,n.jsx)("div",{className:N.content,children:(0,n.jsxs)(ge,{logo:(0,n.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:"MediaDashboard",subTitle:"Unify media",initialValues:{autoLogin:!0},onFinish:function(){var u=O()(c()().mark(function y(M){return c()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,ee(M);case 2:case"end":return p.stop()}},y)}));return function(y){return u.apply(this,arguments)}}(),children:[(S==null?void 0:S.success)===!1&&(0,n.jsx)(je,{content:T.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF(admin/ant.design)"})}),(0,n.jsx)(oe.Z,{name:"username",fieldProps:{size:"large",prefix:(0,n.jsx)(X.Z,{className:N.prefixIcon})},placeholder:T.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin or user"}),rules:[{required:!0,message:(0,n.jsx)(Z.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,n.jsx)(oe.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,n.jsx)(s,{className:N.prefixIcon})},placeholder:T.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!0,message:(0,n.jsx)(Z.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]}),(0,n.jsxs)("div",{style:{marginBottom:24},children:[(0,n.jsx)(Se,{noStyle:!0,name:"autoLogin",children:(0,n.jsx)(Z.FormattedMessage,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),(0,n.jsx)("a",{style:{float:"right"},children:(0,n.jsx)(Z.FormattedMessage,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})})]})]})}),(0,n.jsx)(I.Z,{})]})},Ce=Ze}}]);
