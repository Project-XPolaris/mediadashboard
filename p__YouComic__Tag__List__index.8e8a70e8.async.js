"use strict";(self.webpackChunkmediadashboard=self.webpackChunkmediadashboard||[]).push([[164],{83672:function(R,j,e){e.d(j,{Z:function(){return A}});var F=e(48305),a=e.n(F),p=e(4855),h=e(92094),O=e(85408),g={title:"title___MU09b",addButton:"addButton___XIDmz",selectInput:"selectInput___DPjPn"},U=e(10259),x=e(91480),f=e(4637),T=p.Z.Option;function A(Z){var n=Z.orderItems,N=Z.onAddFilter,C=Z.defaultOrderKey,B=(0,U.Z)(),I=a()(B,1),z=I[0],L=n.map(function(S){return(0,f.jsx)(T,{value:S.key,children:S.title},S.key)}),M=function(K){var V=K.orderKey,P=V===void 0?C:V,$=K.order,E=$===void 0?"asc":$;N(P,E)};return(0,f.jsx)(x.Z,{title:"Order",children:(0,f.jsxs)(h.Z,{form:z,onFinish:M,children:[(0,f.jsx)(h.Z.Item,{label:"Order key",name:"orderKey",children:(0,f.jsx)(p.Z,{size:"small",defaultValue:C,className:g.selectInput,style:{width:120},children:L})}),(0,f.jsx)(h.Z.Item,{label:"Order",name:"order",children:(0,f.jsxs)(p.Z,{defaultValue:"asc",size:"small",className:g.selectInput,style:{width:120},children:[(0,f.jsx)(T,{value:"asc",children:"ASC"}),(0,f.jsx)(T,{value:"desc",children:"Desc"})]})}),(0,f.jsx)(O.ZP,{type:"primary",htmlType:"submit",className:g.addButton,children:"Add"})]})})}},2111:function(R,j,e){e.d(j,{Z:function(){return f}});var F=e(48305),a=e.n(F),p=e(59496),h=e(50468),O=e(85408),g={addButton:"addButton___nJWv1",nameInput:"nameInput___KNqsv"},U=e(91480),x=e(4637),f=function(T){var A=T.onSetSearchName,Z=T.title,n=(0,p.useState)(void 0),N=a()(n,2),C=N[0],B=N[1],I=function(M){var S=M.currentTarget.value;S!==void 0&&S.length!==0&&B(S)},z=function(){C!==void 0&&A(C)};return(0,x.jsxs)(U.Z,{title:Z,children:[(0,x.jsx)(h.Z,{placeholder:"Search name",size:"small",className:g.nameInput,onChange:I}),(0,x.jsx)(O.ZP,{type:"primary",htmlType:"submit",className:g.addButton,onClick:z,disabled:C===void 0||C.length===0,children:"Add"})]})}},91480:function(R,j,e){e.d(j,{Z:function(){return p}});var F={title:"title___ckLLH"},a=e(4637);function p(h){var O=h.children,g=h.title;return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:F.title,children:g}),O]})}},95303:function(R,j,e){e.r(j),e.d(j,{TagListPage:function(){return J},default:function(){return te}});var F=e(26068),a=e.n(F),p=e(48305),h=e.n(p),O=e(87218),g=e(436),U=e(24757),x=e(59496),f=e(67825),T=e.n(f),A=e(72741),Z=e(56456),n=e(4637),N=["filterSections","isOpen","onClose"];function C(r){var t=r.filterSections,i=t===void 0?[]:t,o=r.isOpen,d=o===void 0?!1:o,l=r.onClose,c=T()(r,N),s=function(){return i.map(function(v,u){return(0,n.jsxs)("div",{children:[v,u!==i.length-1&&(0,n.jsx)(A.Z,{})]})})};return(0,n.jsx)(Z.Z,a()(a()({title:"Filter",placement:"right",closable:!1,onClose:l,visible:d},c),{},{children:s()}))}var B=e(15558),I=e.n(B),z=e(83672),L=[{title:"ID",key:"id"},{title:"\u540D\u79F0",key:"name"},{title:"\u521B\u5EFA\u65F6\u95F4",key:"created_at"},{title:"\u4FEE\u6539\u65F6\u95F4",key:"updated_at"}],M=function(t){var i=t.onFilterUpdate,o=t.filter,d=function(c,s){i(a()(a()({},o),{},{orders:[].concat(I()(o.orders.filter(function(m){return m.orderKey!==c})),[{order:s,orderKey:c}])}))};return(0,n.jsx)(z.Z,{orderItems:L,onAddFilter:d,defaultOrderKey:"id"})},S=M,K=e(23153),V=e(4855),P=e(85408),$={addButton:"addButton___wLjt_",input:"input___KvsP6"},E=e(91480),Y=V.Z.Option;function H(r){var t=r.title,i=r.defaultSelect,o=r.options,d=r.onAdd,l=(0,x.useState)(i),c=h()(l,2),s=c[0],m=c[1],v=function(ne){m(ne)},u=o.map(function(D){return(0,n.jsx)(Y,{value:D.value,children:D.title},D.value)}),y=function(){d(s)};return(0,n.jsxs)(E.Z,{title:t,children:[(0,n.jsx)(V.Z,{defaultValue:i,onChange:v,className:$.input,children:u}),(0,n.jsx)(P.ZP,{type:"primary",htmlType:"submit",className:$.addButton,onClick:y,children:"\u6DFB\u52A0"})]})}var W=[{title:"\u4F5C\u8005",value:"artist"},{title:"\u4E3B\u9898",value:"theme"},{title:"\u7CFB\u5217",value:"series"},{title:"\u7FFB\u8BD1",value:"translator"}];function Q(r){var t=r.filter,i=r.onUpdate,o=function(l){t.type.find(function(c){return c===l})===void 0&&i(a()(a()({},t),{},{type:[].concat(I()(t.type),[l])}))};return(0,n.jsx)(H,{options:W.filter(function(d){return t.type.find(function(l){return l===d.value})===void 0}),title:"\u6807\u7B7E\u7C7B\u578B",defaultSelect:"artist",onAdd:o})}function X(r){var t=r.filter,i=r.onUpdateTag,o=function(){return t.orders.map(function(s){var m=function(){i(a()(a()({},t),{},{orders:t.orders.filter(function(u){return u.orderKey!==s.orderKey})}))};return(0,n.jsxs)(K.Z,{color:"geekblue",closable:!0,onClose:m,children:[s.orderKey,s.order==="asc"?" \u5347\u5E8F":" \u964D\u5E8F"]},s.orderKey)})},d=function(){if(t.nameSearch!==void 0){var s=function(){i(a()(a()({},t),{},{nameSearch:void 0}))};return(0,n.jsx)(K.Z,{color:"geekblue",closable:!0,onClose:s,children:"\u641C\u7D22: ".concat(t.nameSearch)},"nameSearch")}},l=function(){return t.type.map(function(s){var m=W.find(function(u){return u.value===s});if(m!==void 0){var v=function(){i(a()(a()({},t),{},{type:t.type.filter(function(y){return y!==s})}))};return(0,n.jsx)(K.Z,{color:"geekblue",closable:!0,onClose:v,children:"\u6807\u7B7E:".concat(m.title)},s)}})};return(0,n.jsxs)(E.Z,{title:"\u5DF2\u6FC0\u6D3B",children:[o(),d(),l()]})}var G=e(2111);function b(r){var t=r.onUpdate,i=r.filter,o=function(l){t(a()(a()({},i),{},{nameSearch:l}))};return(0,n.jsx)(G.Z,{onSetSearchName:o,title:"name search"})}function w(r){var t=r.onClose,i=r.isOpen,o=i===void 0?!1:i,d=r.filter,l=r.onFilterUpdate,c=[(0,n.jsx)(X,{filter:d,onUpdateTag:l},0),(0,n.jsx)(S,{filter:d,onFilterUpdate:l},1),(0,n.jsx)(b,{filter:d,onUpdate:l},2),(0,n.jsx)(Q,{filter:d,onUpdate:l},3)];return(0,n.jsx)(C,{onClose:t,isOpen:o,filterSections:c})}var q=e(43448),_=e(38593),ee=e(21201),k=q.Z.confirm,J=function(){var t=(0,U.useModel)("YouComic.tagList"),i=(0,x.useState)(!1),o=h()(i,2),d=o[0],l=o[1];(0,x.useEffect)(function(){t.loadData({})},[]);var c=[{title:"id",dataIndex:"id",key:"id"},{title:"Name",dataIndex:"name",key:"name"},{title:"Type",dataIndex:"type",key:"type"},{title:"Actions",dataIndex:"id",key:"id",render:function(u,y){return(0,n.jsx)(n.Fragment,{children:t.selectTagIds.length>0&&!t.selectTagIds.includes(y.id)&&(0,n.jsx)(_.Z,{title:"Are you sure to merge to this tag?",onConfirm:function(){t.mergeSelectTags(y.id)},okText:"Yes",cancelText:"No",children:(0,n.jsx)("a",{children:"Merge to this tag"})})})}}],s=[{key:"delete",label:"Delete"}],m=function(u){switch(u.key){case"delete":k({title:"Do you Want to delete these items?",content:"Tag will be deleted",onOk:function(){t.deleteSelectedTags()}});break}};return(0,n.jsxs)(O._z,{extra:(0,n.jsxs)(n.Fragment,{children:[t.selectTagIds.length!==0&&(0,n.jsx)(ee.Z,{menu:{items:s,onClick:m},children:(0,n.jsxs)(P.ZP,{type:"primary",children:["Selected ",t.selectTagIds.length," items"]})}),(0,n.jsx)(P.ZP,{onClick:function(){k({title:"Confirm?",content:"Remove all empty tags",onOk:function(){t.clearEmpty()}})},children:"Clear empty tag"}),(0,n.jsx)(A.Z,{type:"vertical"}),(0,n.jsx)(P.ZP,{type:"primary",onClick:function(){return l(!0)},children:"Filter"})]}),children:[(0,n.jsx)(w,{onClose:function(){return l(!1)},filter:t.filter,isOpen:d,onFilterUpdate:t.updateFilter}),(0,n.jsx)(g.Z,{dataSource:t.tags,columns:c,pagination:{showQuickJumper:!0,total:t.pagination.total,current:t.pagination.page,pageSize:t.pagination.pageSize,pageSizeOptions:["10","20","50","100"],showSizeChanger:!0,defaultPageSize:50,onChange:function(u,y){t.loadData({queryPagination:a()(a()({},t.pagination),{},{page:u,pageSize:y})})}},tableAlertRender:!1,rowKey:function(u){return u.id},search:!1,rowSelection:{selectedRowKeys:t.selectTagIds,onChange:function(u,y){t.setSelectTagIds(u)}}})]})},te=J}}]);
