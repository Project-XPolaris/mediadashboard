"use strict";(self.webpackChunkmediadashboard=self.webpackChunkmediadashboard||[]).push([[916],{62297:function(H,y,e){var C=e(56453),d=e(59496),v=e(13743),S=e(7846),E=function(g,R){return d.createElement(S.Z,(0,C.Z)((0,C.Z)({},g),{},{ref:R,icon:v.Z}))},o=d.forwardRef(E);y.Z=o},1842:function(H,y,e){var C=e(90228),d=e.n(C),v=e(87999),S=e.n(v),E=e(48305),o=e.n(E),f=e(59496),g=function(Y){var k=Y.onReadDir,T=(0,f.useState)("/"),F=o()(T,2),U=F[0],L=F[1],Z=(0,f.useState)(void 0),A=o()(Z,2),i=A[0],O=A[1],j=(0,f.useState)(!1),W=o()(j,2),n=W[0],B=W[1],b=function(){var x=S()(d()().mark(function t(I){var u;return d()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return B(!0),P.next=3,k(I);case 3:u=P.sent,u&&(B(!1),O(u));case 5:case"end":return P.stop()}},t)}));return function(I){return x.apply(this,arguments)}}(),D=function(){if(i){var t=i.backPath;b(t),L(t)}};(0,f.useEffect)(function(){b(U)},[]);var z=function(t){b(t),L(t)},G=function(){var t;return(t=i==null?void 0:i.files)!==null&&t!==void 0?t:[]},K=function(){var t;return(t=i==null?void 0:i.files.filter(function(I){return I.type==="Directory"}))!==null&&t!==void 0?t:[]};return{currentPath:U,goBack:D,getItems:G,setCurrentPath:L,navigate:z,getDirectoryList:K,isLoading:n}};y.Z=g},96133:function(H,y,e){e.r(y),e.d(y,{default:function(){return ae}});var C=e(26068),d=e.n(C),v=e(59496),S=e(87218),E=e(436),o=e(72741),f=e(38593),g=e(85408),R=e(43591),Y=e(24757),k=e(90228),T=e.n(k),F=e(87999),U=e.n(F),L=e(48305),Z=e.n(L),A=e(92094),i=e(92705),O=e(51913),j=e(2620),W=e(56885),n=e(4637),B=function(a){var M=a.trigger,c=a.onOk,m=A.Z.useForm(),r=Z()(m,1),s=r[0];return(0,n.jsxs)(i.Y,{title:"Scan option",trigger:M,form:s,autoFocusFirstInput:!0,onFinish:function(){var p=U()(T()().mark(function X($){return T()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return c($),_.abrupt("return",!0);case 2:case"end":return _.stop()}},X)}));return function(X){return p.apply(this,arguments)}}(),children:[(0,n.jsx)(O.UW,{title:"Auto create entity",children:(0,n.jsx)(j.Z,{name:"directoryMode",label:"Directory mode"})}),(0,n.jsx)(O.UW,{title:"Scanner",children:(0,n.jsx)(W.Z,{mode:"tags",name:"excludeDir",label:"Exclude directory name",width:"xl"})}),(0,n.jsxs)(O.UW,{title:"NSFW check",children:[(0,n.jsx)(j.Z,{name:["videoOption","enableNSFWCheck"],label:"Enable"}),(0,n.jsx)(j.Z,{name:["videoOption","forceNSFWCheck"],label:"Force"})]}),(0,n.jsxs)(O.UW,{title:"Meta",children:[(0,n.jsx)(j.Z,{name:["videoOption","forceRefreshMeta"],label:"Forece refresh meta"}),(0,n.jsx)(j.Z,{name:["videoOption","forceRefreshSub"],label:"Force refresh sub"})]})]})},b=B,D={action:"action___jYjNo"},z=e(15238),G=e(43448),K=e(50468),x=e(95157),t=e(74839),I=e(73242),u={selectorHeader:"selectorHeader___qV66Z",pathInput:"pathInput___aReJX",itemList:"itemList___1nYX5",nameInput:"nameInput___tGTrh"},J=e(62297),P=e(1842),w=e(85426),q=function(a){var M=a.onOk,c=a.onCancel,m=a.visible,r=(0,v.useState)(""),s=Z()(r,2),p=s[0],X=s[1],$=(0,v.useState)(!1),V=Z()($,2),_=V[0],te=V[1],l=(0,P.Z)({onReadDir:w.Lu}),re=function(){if(p===""){z.ZP.error("Name is required");return}if(l.currentPath===""){z.ZP.error("Path is required");return}M(p,_,l.currentPath)};return(0,n.jsxs)(G.Z,{title:"New Library",visible:m,onCancel:c,onOk:re,children:[(0,n.jsx)(K.Z,{placeholder:"Name",className:u.nameInput,value:p,onChange:function(h){return X(h.target.value)}}),(0,n.jsx)(x.Z,{checked:_,onChange:function(h){return te(h.target.checked)},children:"Private"}),(0,n.jsx)(o.Z,{}),(0,n.jsxs)("div",{className:u.selectorHeader,children:[(0,n.jsx)(g.ZP,{onClick:l.goBack,children:"Back"}),(0,n.jsx)(K.Z,{className:u.pathInput,value:l.currentPath,onChange:function(h){return l.setCurrentPath(h.target.value)}}),(0,n.jsx)(g.ZP,{onClick:function(){return l.navigate(l.currentPath)},children:"GO"})]}),(0,n.jsx)("div",{className:u.itemList,children:(0,n.jsx)(t.Z,{dataSource:l.getDirectoryList(),loading:l.isLoading,renderItem:function(h,oe){return(0,n.jsx)(t.Z.Item,{children:(0,n.jsx)(t.Z.Item.Meta,{avatar:(0,n.jsx)(I.Z,{icon:(0,n.jsx)(J.Z,{})}),title:(0,n.jsx)("a",{href:"#",onClick:function(){return l.navigate(h.path)},children:h.name}),description:"Directory"})},oe)}})})]})},ee=q,ne=function(){var a=(0,Y.useModel)("YouVideo.libraryList");(0,v.useEffect)(function(){a.initData({})},[]);var M=[{title:"id",dataIndex:"id",key:"id",hideInSearch:!0},{title:"Name",dataIndex:"name",key:"name",hideInSearch:!0},{title:"Path",dataIndex:"path",key:"path",hideInSearch:!0},{title:"Actions",dataIndex:"id",key:"id",hideInSearch:!0,render:function(m,r){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b,{trigger:(0,n.jsx)("a",{className:D.action,children:"Scan"}),onOk:function(p){a.scan(r.id,p)}}),(0,n.jsx)(o.Z,{type:"vertical"}),(0,n.jsx)("a",{className:D.action,onClick:function(){return a.syncIndex(r.id)},children:"Sync Index"}),(0,n.jsx)(o.Z,{type:"vertical"}),(0,n.jsx)("a",{className:D.action,onClick:function(){return a.generateMeta(r.id)},children:"Generate Meta"}),(0,n.jsx)(o.Z,{type:"vertical"}),(0,n.jsx)(f.Z,{title:"Are you sure to delete?",onConfirm:function(){return a.deleteLibrary(r.id)},okText:"Yes",cancelText:"No",children:(0,n.jsx)("a",{className:D.action,children:"Delete"})})]})}}];return(0,n.jsxs)(S._z,{extra:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(g.ZP,{onClick:function(){return a.setNewLibraryDialogOpen(!0)},children:"New library"})}),children:[(0,n.jsx)(ee,{onOk:function(m,r,s){return a.createLibrary({name:m,path:s,private:r})},onCancel:function(){return a.setNewLibraryDialogOpen(!1)},visible:a.newLibraryDialogOpen}),(0,n.jsx)(R.Z,{children:(0,n.jsx)(E.Z,{columns:M,dataSource:a.libraryList,pagination:{showQuickJumper:!0,total:a.pagination.total,current:a.pagination.page,pageSize:a.pagination.pageSize,pageSizeOptions:["10","20","50","100"],showSizeChanger:!0,defaultPageSize:50,onChange:function(m,r){a.initData({page:d()(d()({},a.pagination),{},{page:m,pageSize:r})})}},search:!1})})]})},ae=ne}}]);
