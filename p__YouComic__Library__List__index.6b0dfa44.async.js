"use strict";(self.webpackChunkmediadashboard=self.webpackChunkmediadashboard||[]).push([[972],{62297:function(Q,x,n){var j=n(56453),s=n(59496),L=n(13743),h=n(7846),T=function(Z,N){return s.createElement(h.Z,(0,j.Z)((0,j.Z)({},Z),{},{ref:N,icon:L.Z}))},d=s.forwardRef(T);x.Z=d},1842:function(Q,x,n){var j=n(90228),s=n.n(j),L=n(87999),h=n.n(L),T=n(48305),d=n.n(T),g=n(59496),Z=function(M){var y=M.onReadDir,_=(0,g.useState)("/"),C=d()(_,2),R=C[0],S=C[1],W=(0,g.useState)(void 0),D=d()(W,2),l=D[0],E=D[1],$=(0,g.useState)(!1),K=d()($,2),Y=K[0],e=K[1],A=function(){var P=h()(s()().mark(function t(b){var U;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e(!0),r.next=3,y(b);case 3:U=r.sent,U&&(e(!1),E(U));case 5:case"end":return r.stop()}},t)}));return function(b){return P.apply(this,arguments)}}(),z=function(){if(l){var t=l.backPath;A(t),S(t)}};(0,g.useEffect)(function(){A(R)},[]);var G=function(t){A(t),S(t)},X=function(){var t;return(t=l==null?void 0:l.files)!==null&&t!==void 0?t:[]},H=function(){var t;return(t=l==null?void 0:l.files.filter(function(b){return b.type==="Directory"}))!==null&&t!==void 0?t:[]};return{currentPath:R,goBack:z,getItems:X,setCurrentPath:S,navigate:G,getDirectoryList:H,isLoading:Y}};x.Z=Z},37039:function(Q,x,n){n.r(x),n.d(x,{default:function(){return U}});var j=n(90228),s=n.n(j),L=n(87999),h=n.n(L),T=n(48305),d=n.n(T),g=n(87218),Z=n(436),N=n(24757),M=n(59496),y=n(38593),_=n(72741),C=n(85408),R=n(15238),S=n(43448),W=n(50468),D=n(74839),l=n(73242),E={selectorHeader:"selectorHeader___E68J1",pathInput:"pathInput___hRylh",itemList:"itemList___E7sP2",nameInput:"nameInput___JndUc"},$=n(62297),K=n(1842),Y=n(957),e=n(4637),A=function(r){var B=r.onOk,O=r.onCancel,F=r.visible,p=(0,M.useState)(""),I=d()(p,2),u=I[0],m=I[1],a=(0,K.Z)({onReadDir:function(){var i=h()(s()().mark(function k(V){var v,w;return s()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,Y.IT)(V);case 2:if(v=f.sent,!(v!=null&&v.data)){f.next=6;break}return w={sep:v.data.sep,files:v.data.files,backPath:v.data.backPath,path:v.data.path},f.abrupt("return",w);case 6:return f.abrupt("return",void 0);case 7:case"end":return f.stop()}},k)}));function o(k){return i.apply(this,arguments)}return o}()}),c=function(){if(u===""){R.ZP.error("Name is required");return}if(a.currentPath===""){R.ZP.error("Path is required");return}B(u,a.currentPath)};return(0,e.jsxs)(S.Z,{title:"New Library",visible:F,onCancel:O,onOk:c,children:[(0,e.jsx)(W.Z,{placeholder:"Name",className:E.nameInput,value:u,onChange:function(o){return m(o.target.value)}}),(0,e.jsx)(_.Z,{}),(0,e.jsxs)("div",{className:E.selectorHeader,children:[(0,e.jsx)(C.ZP,{onClick:a.goBack,children:"Back"}),(0,e.jsx)(W.Z,{className:E.pathInput,value:a.currentPath,onChange:function(o){return a.setCurrentPath(o.target.value)}}),(0,e.jsx)(C.ZP,{onClick:function(){return a.navigate(a.currentPath)},children:"GO"})]}),(0,e.jsx)("div",{className:E.itemList,children:(0,e.jsx)(D.Z,{dataSource:a.getDirectoryList(),loading:a.isLoading,renderItem:function(o,k){return(0,e.jsx)(D.Z.Item,{children:(0,e.jsx)(D.Z.Item.Meta,{avatar:(0,e.jsx)(l.Z,{icon:(0,e.jsx)($.Z,{})}),title:(0,e.jsx)("a",{href:"#",onClick:function(){return a.navigate(o.path)},children:o.name}),description:"Directory"})},k)}})})]})},z=A,G=n(92094),X=n(92705),H=n(2620),P=function(r){var B=r.trigger,O=r.onOk,F=G.Z.useForm(),p=d()(F,1),I=p[0];return(0,e.jsx)(X.Y,{title:"Scan option",trigger:B,form:I,autoFocusFirstInput:!0,onFinish:function(){var u=h()(s()().mark(function m(a){return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return O(a),i.abrupt("return",!0);case 2:case"end":return i.stop()}},m)}));return function(m){return u.apply(this,arguments)}}(),children:(0,e.jsx)(H.Z,{name:"force",label:"Force generate thumbnails"})})},t=P,b=function(){var r=(0,N.useModel)("YouComic.libraryList"),B=(0,M.useState)(!1),O=d()(B,2),F=O[0],p=O[1];(0,M.useEffect)(function(){r.refresh({})},[]);var I=[{title:"id",dataIndex:"id",key:"id"},{title:"name",dataIndex:"name",key:"name"},{title:"path",dataIndex:"path",key:"path"},{title:"action",dataIndex:"id",key:"id",render:function(m,a){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(y.Z,{title:"Are you sure to scan?",onConfirm:function(){r.scanLibrary(a.id)},okText:"Yes",cancelText:"No",children:(0,e.jsx)("a",{children:"Scan"})}),(0,e.jsx)(_.Z,{type:"vertical"}),(0,e.jsx)(y.Z,{title:"Are you sure to match books tag?",onConfirm:function(){r.matchLibrary(a.id)},okText:"Yes",cancelText:"No",children:(0,e.jsx)("a",{children:"Match Tags"})}),(0,e.jsx)(_.Z,{type:"vertical"}),(0,e.jsx)(y.Z,{title:"Are you sure to delete library?",onConfirm:function(){r.remove(a.id)},okText:"Yes",cancelText:"No",children:(0,e.jsx)("a",{children:"Delete"})}),(0,e.jsx)(_.Z,{type:"vertical"}),(0,e.jsx)(t,{trigger:(0,e.jsx)("a",{children:"Generate thumbnails"}),onOk:function(i){return r.generateThumbnails(a.id,i.force)}}),(0,e.jsx)(_.Z,{type:"vertical"}),(0,e.jsx)(y.Z,{title:"Are you sure to write meta?",onConfirm:function(){r.writeMeta(a.id)},okText:"Yes",cancelText:"No",children:(0,e.jsx)("a",{children:"Write meta"})})]})}}];return(0,e.jsxs)(g._z,{extra:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(C.ZP,{onClick:function(){return p(!0)},children:"Add library"})}),children:[(0,e.jsx)(z,{onOk:function(){var u=h()(s()().mark(function m(a,c){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.create({name:a,path:c});case 2:p(!1);case 3:case"end":return o.stop()}},m)}));return function(m,a){return u.apply(this,arguments)}}(),onCancel:function(){return p(!1)},visible:F}),(0,e.jsx)(Z.Z,{dataSource:r.libraryList,columns:I})]})},U=b}}]);
