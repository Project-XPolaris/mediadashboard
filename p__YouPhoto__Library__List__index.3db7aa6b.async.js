"use strict";(self.webpackChunkmediadashboard=self.webpackChunkmediadashboard||[]).push([[289],{62297:function(te,L,a){var Z=a(56453),s=a(59496),R=a(13743),m=a(7846),F=function(U,N){return s.createElement(m.Z,(0,Z.Z)((0,Z.Z)({},U),{},{ref:N,icon:R.Z}))},d=s.forwardRef(F);L.Z=d},1842:function(te,L,a){var Z=a(90228),s=a.n(Z),R=a(87999),m=a.n(R),F=a(48305),d=a.n(F),_=a(59496),U=function(V){var A=V.onReadDir,Q=(0,_.useState)("/"),G=d()(Q,2),P=G[0],T=G[1],J=(0,_.useState)(void 0),W=d()(J,2),h=W[0],B=W[1],w=(0,_.useState)(!1),E=d()(w,2),q=E[0],X=E[1],$=function(){var x=m()(s()().mark(function n(i){var k;return s()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return X(!0),S.next=3,A(i);case 3:k=S.sent,k&&(X(!1),B(k));case 5:case"end":return S.stop()}},n)}));return function(i){return x.apply(this,arguments)}}(),e=function(){if(h){var n=h.backPath;$(n),T(n)}};(0,_.useEffect)(function(){$(P)},[]);var ee=function(n){$(n),T(n)},ae=function(){var n;return(n=h==null?void 0:h.files)!==null&&n!==void 0?n:[]},re=function(){var n;return(n=h==null?void 0:h.files.filter(function(i){return i.type==="Directory"}))!==null&&n!==void 0?n:[]};return{currentPath:P,goBack:e,getItems:ae,setCurrentPath:T,navigate:ee,getDirectoryList:re,isLoading:q}};L.Z=U},82065:function(te,L,a){a.r(L),a.d(L,{default:function(){return de}});var Z=a(90228),s=a.n(Z),R=a(87999),m=a.n(R),F=a(48305),d=a.n(F),_=a(87218),U=a(24757),N=a(72741),V=a(38593),A=a(85408),Q=a(43591),G=a(76521),P=a(59496),T=a(15238),J=a(43448),W=a(50468),h=a(95157),B=a(74839),w=a(73242),E={selectorHeader:"selectorHeader___T0Y9D",pathInput:"pathInput___GDEtm",itemList:"itemList___VEQyT",nameInput:"nameInput___jIxTE"},q=a(62297),X=a(1842),$=a(45115),e=a(4637),ee=function(l){var M=l.onOk,f=l.onCancel,K=l.visible,y=(0,P.useState)(""),I=d()(y,2),g=I[0],p=I[1],O=(0,P.useState)(!1),b=d()(O,2),C=b[0],Y=b[1],r=(0,X.Z)({onReadDir:function(){var j=m()(s()().mark(function u(v){var t,z;return s()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,$.IT)(v);case 2:if(t=D.sent,!(t!=null&&t.data)){D.next=6;break}return z={sep:t.data.sep,files:t.data.files,backPath:t.data.backPath,path:t.data.path},D.abrupt("return",z);case 6:return D.abrupt("return",void 0);case 7:case"end":return D.stop()}},u)}));function c(u){return j.apply(this,arguments)}return c}()}),ne=function(){if(g===""){T.ZP.error("Name is required");return}if(r.currentPath===""){T.ZP.error("Path is required");return}M(g,C,r.currentPath)};return(0,e.jsxs)(J.Z,{title:"New Library",visible:K,onCancel:f,onOk:ne,children:[(0,e.jsx)(W.Z,{placeholder:"Name",className:E.nameInput,value:g,onChange:function(c){return p(c.target.value)}}),(0,e.jsx)(h.Z,{checked:C,onChange:function(c){return Y(c.target.checked)},children:"Private"}),(0,e.jsx)(N.Z,{}),(0,e.jsxs)("div",{className:E.selectorHeader,children:[(0,e.jsx)(A.ZP,{onClick:r.goBack,children:"Back"}),(0,e.jsx)(W.Z,{className:E.pathInput,value:r.currentPath,onChange:function(c){return r.setCurrentPath(c.target.value)}}),(0,e.jsx)(A.ZP,{onClick:function(){return r.navigate(r.currentPath)},children:"GO"})]}),(0,e.jsx)("div",{className:E.itemList,children:(0,e.jsx)(B.Z,{dataSource:r.getDirectoryList(),loading:r.isLoading,renderItem:function(c,u){return(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(B.Z.Item.Meta,{avatar:(0,e.jsx)(w.Z,{icon:(0,e.jsx)(q.Z,{})}),title:(0,e.jsx)("a",{href:"#",onClick:function(){return r.navigate(c.path)},children:c.name}),description:"Directory"})},u)}})})]})},ae=ee,re=a(92094),x=a(92705),n=a(51913),i=a(2620),k=a(56885),se=a(75731),S=a(39184),oe=function(){var H=m()(s()().mark(function l(){return s()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,S.M)("/state",{method:"GET"}));case 1:case"end":return f.stop()}},l)}));return function(){return H.apply(this,arguments)}}(),ie=function(l){var M=l.trigger,f=l.onOk,K=re.Z.useForm(),y=d()(K,1),I=y[0],g=P.useState([]),p=d()(g,2),O=p[0],b=p[1],C=P.useState(),Y=d()(C,2),r=Y[0],ne=Y[1],j=function(){var u=m()(s()().mark(function v(){var t;return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,se.sx)();case 2:t=o.sent,t.data&&(b(t.data),t.data.length>0&&I.setFieldsValue({taggerModel:t.data[0]}));case 4:case"end":return o.stop()}},v)}));return function(){return u.apply(this,arguments)}}(),c=function(){var u=m()(s()().mark(function v(){var t;return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,oe();case 2:t=o.sent,t.data&&ne(t.data);case 4:case"end":return o.stop()}},v)}));return function(){return u.apply(this,arguments)}}();return(0,P.useEffect)(function(){j(),c()},[]),(0,e.jsxs)(x.Y,{title:"Scan option",trigger:M,form:I,autoFocusFirstInput:!0,onFinish:function(){var u=m()(s()().mark(function v(t){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return f(t),o.abrupt("return",!0);case 2:case"end":return o.stop()}},v)}));return function(v){return u.apply(this,arguments)}}(),initialValues:{enableDomainColor:!1,forceRefreshDomainColor:!1,enableImageClassification:!1,forceImageClassification:!1,enableNsfwCheck:!1,forceNsfwCheck:!1,enableDeepdanbooruCheck:!1,forceDeepdanbooruCheck:!1,enableTagger:!1,forceTagger:!1},children:[(0,e.jsxs)(n.UW,{title:"Color pattern",children:[(0,e.jsx)(i.Z,{name:"enableDomainColor",label:"Enable",colSize:1}),(0,e.jsx)(i.Z,{name:"forceRefreshDomainColor",label:"Force"})]}),(r==null?void 0:r.imageClassificationEnable)&&(0,e.jsxs)(n.UW,{title:"Image Classification",children:[(0,e.jsx)(i.Z,{name:"enableImageClassification",label:"Enable"}),(0,e.jsx)(i.Z,{name:"forceImageClassification",label:"Force"})]}),(r==null?void 0:r.nsfwEnable)&&(0,e.jsxs)(n.UW,{title:"NSFW",children:[(0,e.jsx)(i.Z,{name:"enableNsfwCheck",label:"Enable"}),(0,e.jsx)(i.Z,{name:"forceNsfwCheck",label:"Force"})]}),(r==null?void 0:r.deepdanbooruEnable)&&(0,e.jsxs)(n.UW,{title:"Deepdanbooru",children:[(0,e.jsx)(i.Z,{name:"enableDeepdanbooruCheck",label:"Enable"}),(0,e.jsx)(i.Z,{name:"forceDeepdanbooruCheck",label:"Force"})]}),(r==null?void 0:r.imageTaggerEnable)&&(0,e.jsxs)(n.UW,{title:"Tagger",children:[(0,e.jsx)(i.Z,{name:"enableTagger",label:"Enable"}),(0,e.jsx)(i.Z,{name:"forceTagger",label:"Force"}),(0,e.jsx)(k.Z,{width:"md",name:"taggerModel",label:"Model",options:O.map(function(u){return{label:u,value:u}})})]})]})},le=ie,ue=function(){var l=(0,U.useModel)("YouPhoto.libraryList"),M=(0,P.useState)(!1),f=d()(M,2),K=f[0],y=f[1],I=[{title:"id",dataIndex:"id",key:"id"},{title:"Name",dataIndex:"name",key:"name"},{title:"Path",dataIndex:"path",key:"path"},{title:"Actions",dataIndex:"id",key:"id",render:function(p,O){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(le,{trigger:(0,e.jsx)("a",{children:"Scan"}),onOk:function(C){return l.scan(p,C)}}),(0,e.jsx)(N.Z,{type:"vertical"}),(0,e.jsx)(V.Z,{title:"Are you sure to delete?",onConfirm:function(){return l.removeLibrary(p)},okText:"Yes",cancelText:"No",children:(0,e.jsx)("a",{children:"Delete"})})]})}}];return(0,e.jsxs)(_._z,{extra:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(A.ZP,{onClick:function(){return y(!0)},children:"New library"})}),children:[(0,e.jsx)(ae,{onOk:function(){var g=m()(s()().mark(function p(O,b,C){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,l.create({name:O,path:C,private:b});case 2:y(!1);case 3:case"end":return r.stop()}},p)}));return function(p,O,b){return g.apply(this,arguments)}}(),onCancel:function(){return y(!1)},visible:K}),(0,e.jsx)(Q.Z,{children:(0,e.jsx)(G.Z,{dataSource:l.libraryList,columns:I})})]})},de=ue}}]);
